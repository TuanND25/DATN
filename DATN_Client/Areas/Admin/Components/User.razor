﻿<div class="card">
	<div class="card-body">
		<h1 style="margin-top:20px">Admin</h1>
		<div class="pagetitle">
			<nav>
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a href="index.html">Home</a></li>

				</ol>
			</nav>
		</div>
	</div>
</div>



<section class="section">
	<div class="row">
		<div class="col-lg-6">

			<div class="card">
				<div class="card-body">
					<h4 class="card-title">General Form Elements</h4>
					<EditForm Model="user_VM">
						<div class="row">
							<div class="col-md-8">
								<InputText class="form-control" @bind-Value="user_VM.UserName" placeholder="Tìm kiếm theo tên" />
							</div>
							<div class="col-md-4">
								<button type="submit" class="btn btn-primary" @onclick="SearchByUsername">Tìm kiếm</button>
							</div>
						</div>
					</EditForm>
					<!-- General Form Elements -->
					@*                    <EditForm Model="voucher_VM">

					<div class="row mb-3">
					<label for="inputText" class="col-sm-4 col-form-label">Tên voucher</label>
					<div class="col-sm-8">
					<InputText class="form-control" @bind-Value="voucher_VM.Name" />
					</div>
					</div>
					<div class="row mb-3">
					<label for="inputText" class="col-sm-4 col-form-label">Code</label>
					<div class="col-sm-8">
					<InputText class="form-control" @bind-Value="voucher_VM.Code" />
					</div>
					</div>

					<div class="row mb-3">
					<label for="inputNumber" class="col-sm-4 col-form-label">Phần trăm giảm</label>
					<div class="col-sm-8">
					<InputNumber class="form-control" @bind-Value="voucher_VM.Percent" />
					</div>
					</div>
					<div class="row mb-3">
					<label for="inputNumber" class="col-sm-4 col-form-label">Số lượng</label>
					<div class="col-sm-8">
					<InputNumber class="form-control" @bind-Value="@voucher_VM.Quantity" />
					</div>
					</div>


					<div class="row mb-3">
					<label for="inputDate" class="col-sm-4 col-form-label">Ngày bắt đầu</label>
					<div class="col-sm-8">
					<input type="datetime-local" class="form-control" @bind-value="@voucher_VM.StartDate" />
					</div>
					</div>


					<div class="row mb-3">
					<label for="inputDate" class="col-sm-4 col-form-label">Ngày kết thúc</label>
					<div class="col-sm-8">
					<input type="datetime-local" class="form-control" @bind-value="@voucher_VM.EndDate">
					</div>
					</div>




					<div class="row mb-3">
					<label for="inputPassword" class="col-sm-4 col-form-label" style="font-size:14px">Điều kiện tối thiểu</label>
					<div class="col-sm-8">
					<InputNumber class="form-control" style="height: 50px" @bind-Value="@voucher_VM.Discount_Conditions" />
					</div>
					</div>
					<div class="row mb-3">
					<label for="inputPassword" class="col-sm-4 col-form-label" style="font-size:14px">Giám tối đa trên hóa đơn</label>
					<div class="col-sm-8">
					<InputNumber class="form-control" style="height: 50px" @bind-Value="@voucher_VM.Maximum_Reduction" />
					</div>
					</div>

					<div class="row mb-3">
					<label class="col-sm-4 col-form-label">Mô tả </label>
					<div class="col-sm-8">
					<div class="row">
					<InputRadioGroup @bind-Value="@voucher_VM.Status" class="form-control">
					<div class="col-sm-6">
					<InputRadio Value="1" /> Hoạt động
					</div>
					<div class="col-sm-6">
					<InputRadio Value="0" /> Ngừng hoạt động
					</div>
					</InputRadioGroup>
					</div>
					</div>
					</div>


					<div class="row mb-3">
					<label class="col-sm-4 col-form-label">Submit </label>
					<div class="col-sm-8">
					<button type="submit" class="btn btn-primary" @onclick="AddVoucher">Create</button>
					<button type="submit" class="btn btn-primary" @onclick="()=>UpdateVoucher(voucher_VM)">Upadate</button>
					</div>
					</div>




					</EditForm><!-- End General Form Elements -->*@
				</div>
			</div>

		</div>




		<div class="card">
			<div class="card-body">
				<h4 style="margin-top:20px">List User</h4>
				<div class="pagetitle">
				</div>
				@if (users == null)
				{
					<p><em>Loading...</em></p>
				}
				else
				{
					<div style="height: 500px; overflow-y: auto;">
						<table class="table">
							<thead>
								<tr style="position: sticky;top:0">
									<th>Username</th>
									<th>Phone</th>
									<th>Email</th>
									<th>Trạng Thái</th>
									<th>Thay đổi Trạng Thái</th>
									<th>Địa chỉ</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var x in users)
								{
									<tr>
										<td>@x.UserName</td>
										<td>@x.PhoneNumber</td>
										<td>@x.Email</td>
										<td>@(x.Status == 1 ? " Đang Hoạt động" : "Ngừng hoạt động")</td>


										<td>
											<div class="modal fade" id="Status">
												<div class="modal-dialog">
													<div class="modal-content">

														<!-- Phần tiêu đề của popup -->
														<div class="modal-header">
															<h4 class="modal-title">Thêm sản phẩm</h4>
															<button type="button" class="close" data-dismiss="modal">&times;</button>
														</div>

														<!-- Nội dung của popup -->
														<p>Bạn có đồng ý ngừng hoạt động user này</p>
														<!-- Phần chân của popup -->
														<div class="modal-footer">
															<button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
															<button type="button" class="btn btn-danger" @onclick="ChangeStatusUser" data-dismiss="modal">Xác nhận</button>
														</div>
													</div>
												</div>
											</div>
											<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Status" @onclick="()=> gandoituong(x)">
												Ngừng hoạt động
											</button>
										</td>
										<td><button class="btn btn-primary" @onclick="()=>GetAddressShipByUser(x.Id)"><i class="bi bi-pencil-square"></i></button></td>
									</tr>

								}
							</tbody>
						</table>
					</div>
				}
			</div>
		</div>



	</div>
</section>


